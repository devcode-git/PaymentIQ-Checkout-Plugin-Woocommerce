!function(n){var t={};function e(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return n[a].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=n,e.c=t,e.d=function(n,t,a){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:a})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var o in n)e.d(a,o,function(t){return n[t]}.bind(null,o));return a},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=1)}([,function(n,t){window.addEventListener("load",(function(){"use strict";var n;console.log("ADMIN SCRIPT"),n=jQuery,console.log("REGISTER CAPTURE HANDLER"),n(".inside").on("click","#paymentiq-checkout-manual-capture",(function(t){var e,a,o=n(".wc-order-totals .total .woocommerce-Price-amount"),r=(e=o[o.length-1].innerText,a=e.replace(/[^0-9.]/g,""),parseInt(a).toFixed(2)),c=t.target.getAttribute("data-piq_captured_amount");c||(c="0.00"),function(n,t,e){!function(n){n(".wc-order-bulk-actions").toggle()}(n);var a=n(".wc-order-bulk-actions")[0].parentElement;t=(parseInt(t)-parseInt(e)).toFixed(2);var o="\n    <script>\n      function handleCaptureAmountChange () {\n        var value = document.getElementById('capture_amount').value\n        document.getElementById('capture-amount').innerHTML = value\n        document.getElementById('capture-amount').value = value\n\n        if (value > ".concat(t,') {\n          document.getElementById(\'piq-capture-button\').disabled = true;\n        } else {\n          document.getElementById(\'piq-capture-button\').disabled = false;\n        }\n      }\n\n      // If amount is set to 35, always return amount as 35.00\n      // If passed in as 35.55, return as 35.55\n      function addZeroes(num) {\n        const dec = num.split(\'.\')[1]\n        const len = dec && dec.length > 2 ? dec.length : 2\n        return Number(num).toFixed(len)\n      }\n\n      function handlePiqCaptureClick () {\n        var captureAmount = document.getElementById(\'capture-amount\').innerText\n        captureAmount = addZeroes(captureAmount)\n        var params = "&paymentiq_checkout_action=capture&amount=" + captureAmount;\n        var url = window.location.href + params;\n        window.location.href = url;\n      }\n  <\/script>\n\n  \n  <div class="wc-order-data-row wc-order-capture-items wc-order-data-row-toggle">\n    <p style=\'float: left; text-align: left; width: 500px; max-width: 50%;\'>\n      <b>Please note!</b>\n      <br/>\n      If the order was payed for using Santander invoice/pay-later, <b>only one</b> capture can be made in total.\n      Partial capture is supported.\n    </p>\n\n    <table class="wc-order-totals">\n      <tr>\n        <td class="label">Amount already captured:</td>\n        <td class="total">-<span class="woocommerce-Price-amount amount"><span class="woocommerce-Price-currencySymbol">kr</span>').concat(e,'</span></td>\n      </tr>\n      <tr>\n        <td class="label">Total available to capture:</td>\n        <td class="total"><span class="woocommerce-Price-amount amount"><span class="woocommerce-Price-currencySymbol">kr</span>').concat(t,'</span></td>\n      </tr>\n      <tr>\n        <td class="label">\n          <label for="refund_amount">\n            <span class="woocommerce-help-tip"></span>\t\t\t\t\tCapture amount:\n          </label>\n        </td>\n        <td class="total">\n          <input\n            onkeyup=\'handleCaptureAmountChange()\'\n            type="number"\n            id="capture_amount"\n            value="').concat(t,'"\n            min="1"\n            max="').concat(t,'"\n            name="capture_amount"\n            class="wc_input_price">\n\n          <div class="clear"></div>\n        </td>\n      </tr>\n    </tbody></table>\n    <div class="clear"></div>\n    <div class="capture-actions">\n      <button onclick="handlePiqCaptureClick()" id=\'piq-capture-button\' type="button" class="button button-primary">\n        Capture\n        <span class="wc-order-refund-amount">\n          <span class="woocommerce-Price-amount amount">\n            <span class="woocommerce-Price-currencySymbol">\n              kr\n            </span>\n            <span id=\'capture-amount\'>').concat(t,'</span>\n          </span>\n        </span> \n        via PaymentIQ Checkout\n      </button>\n      \n      <button type="button" class="button cancel-action">Cancel</button>\n      <div class="clear"></div>\n    </div>\n  </div>');n(a).append(o)}(n,r,c)}))}))}]);